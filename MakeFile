# Arquivo: Makefile

# Nome do projeto (opcional)
PROJECT_NAME ?= airflow-docker

# Comando para buildar a imagem do Airflow (Dockerfile + requirements)
build:
	@echo "ðŸ”§ Construindo a imagem Docker do Airflow..."
	docker-compose build

# Inicializa o banco de dados e posteriomrnte os serviÃ§os
up:
	@echo "ðŸš€ Inicializando o Airflow..."
	docker-compose run --rm airflow-init
	docker-compose up -d
	@echo "âœ… Airflow disponÃ­vel em: http://localhost:8080"

# Derruba os serviÃ§os
down:
	@echo "ðŸ›‘ Derrubando os containers..."
	docker-compose down

# Limpa volumes e containers completamente
clean:
	@echo "ðŸ§¹ Limpando tudo..."
	docker-compose down -v --remove-orphans

# Log dos containers
logs:
	docker-compose logs -f

# Ajuda
help:
	@echo ""
	@echo "ðŸ“˜ Comandos disponÃ­veis:"
	@echo "  make build   â†’ Baixa e instala os pacotes necessÃ¡rios"
	@echo "  make up      â†’ Inicializa banco e sobe o Airflow"
	@echo "  make down    â†’ Derruba os containers"
	@echo "  make clean   â†’ Remove tudo (containers + volumes)"
	@echo "  make logs    â†’ Exibe os logs do Airflow"
	@echo ""
